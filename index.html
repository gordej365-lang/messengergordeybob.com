<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–û–Ω–ª–∞–π–Ω-—á–∞—Ç</title>
</head>
<body>

  <h2>üí¨ –û–Ω–ª–∞–π–Ω-—á–∞—Ç</h2>
  <input id="nickname" placeholder="–ù–∏–∫">
  <br><br>
  <div id="chat" style="border:1px solid #000; width:300px; height:200px; overflow-y:auto; padding:5px;"></div>
  <br>
  <input id="message" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ">
  <button onclick="sendMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
  <script>
    // üîπ –í—Å—Ç–∞–≤—å —Å—é–¥–∞ —Å–≤–æ–π firebaseConfig
    const firebaseConfig = {
      apiKey: "AIzaSyBqxdrLHc_yaJAkWL3oAyNj65JsQuCaFC4",
      authDomain: "appp-9b246.firebaseapp.com",
      databaseURL: "https://appp-9b246-default-rtdb.firebaseio.com",
      projectId: "appp-9b246",
      storageBucket: "appp-9b246.firebasestorage.app",
      messagingSenderId: "1084543489385",
      appId: "1:1084543489385:web:7d7eb4e552a7b8fafbd9f8"
    };
    firebase.initializeApp(firebaseConfig);

    const db = firebase.database();

    function sendMessage() {
      const name = document.getElementById("nickname").value || "–ê–Ω–æ–Ω–∏–º";
      const text = document.getElementById("message").value;

      if (text.trim() === "") return;

      db.ref("messages").push({
        name: name,
        text: text
      });

      document.getElementById("message").value = "";
    }

    // üì° –°–ª—É—à–∞–µ–º –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
    const chat = document.getElementById("chat");
    db.ref("messages").on("child_added", snapshot => {
      const msg = snapshot.val();
      const p = document.createElement("p");
      p.textContent = msg.name + ": " + msg.text;
      chat.appendChild(p);
      chat.scrollTop = chat.scrollHeight;
    });
  </script>
</body>
</html>